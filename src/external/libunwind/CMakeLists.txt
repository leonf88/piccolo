set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -DHAVE_CONFIG_H -D_GNU_SOURCE -U_FORTIFY_SOURCE -fPIC -march=core2 -Wall -Wno-sign-compare -Wno-unused-function -fno-omit-frame-pointer -ggdb1")

include_directories(src)
include_directories(include )
include_directories(include/tdep-x86_64 )

set_property(SOURCE  
             src/x86_64/getcontext.S
             src/x86_64/longjmp.S
             src/x86_64/setcontext.S
             src/x86_64/siglongjmp.S
             PROPERTY LANGUAGE C)

add_library(unwind
            src/dwarf/Gexpr.c
            src/dwarf/Gfde.c
            src/dwarf/Gfind_proc_info-lsb.c
            src/dwarf/global.c
            src/dwarf/Gparser.c
            src/dwarf/Gpe.c
            src/dwarf/Gstep.c
            src/dwarf/Lexpr.c
            src/dwarf/Lfde.c
            src/dwarf/Lfind_proc_info-lsb.c
            src/dwarf/Lparser.c
            src/dwarf/Lpe.c
            src/dwarf/Lstep.c
            src/elf64.c
            src/elfxx.c
            src/os-linux.c
            src/ptrace/_UPT_access_fpreg.c
            src/ptrace/_UPT_access_mem.c
            src/ptrace/_UPT_accessors.c
            src/ptrace/_UPT_access_reg.c
            src/ptrace/_UPT_create.c
            src/ptrace/_UPT_destroy.c
            src/ptrace/_UPT_elf.c
            src/ptrace/_UPT_find_proc_info.c
            src/ptrace/_UPT_get_dyn_info_list_addr.c
            src/ptrace/_UPT_get_proc_name.c
            src/ptrace/_UPT_put_unwind_info.c
            src/ptrace/_UPT_reg_offset.c
            src/ptrace/_UPT_resume.c
            src/setjmp/longjmp.c
            src/setjmp/setjmp.c
            src/setjmp/siglongjmp.c
            src/setjmp/sigsetjmp.c
            src/unwind/Backtrace.c
            src/unwind/DeleteException.c
            src/unwind/FindEnclosingFunction.c
            src/unwind/ForcedUnwind.c
            src/unwind/GetBSP.c
            src/unwind/GetCFA.c
            src/unwind/GetDataRelBase.c
            src/unwind/GetGR.c
            src/unwind/GetIP.c
            src/unwind/GetIPInfo.c
            src/unwind/GetLanguageSpecificData.c
            src/unwind/GetRegionStart.c
            src/unwind/GetTextRelBase.c
            src/unwind/RaiseException.c
            src/unwind/Resume.c
            src/unwind/Resume_or_Rethrow.c
            src/unwind/SetGR.c
            src/unwind/SetIP.c
            src/x86_64/Gcreate_addr_space.c
            src/x86_64/getcontext.S
            src/x86_64/Gget_proc_info.c
            src/x86_64/Gget_save_loc.c
            src/x86_64/Gglobal.c
            src/x86_64/Ginit.c
            src/x86_64/Ginit_local.c
            src/x86_64/Ginit_remote.c
            src/x86_64/Gis_signal_frame.c
            src/x86_64/Gregs.c
            src/x86_64/Gresume.c
            src/x86_64/Gstep.c
            src/x86_64/is_fpreg.c
            src/x86_64/Lcreate_addr_space.c
            src/x86_64/Lget_proc_info.c
            src/x86_64/Lget_save_loc.c
            src/x86_64/Lglobal.c
            src/x86_64/Linit.c
            src/x86_64/Linit_local.c
            src/x86_64/Linit_remote.c
            src/x86_64/Lis_signal_frame.c
            src/x86_64/longjmp.S
            src/x86_64/Lregs.c
            src/x86_64/Lresume.c
            src/x86_64/Lstep.c
            src/x86_64/regname.c
            src/x86_64/setcontext.S
            src/x86_64/siglongjmp.S            
            src/mi/Gdestroy_addr_space.c
            src/mi/_ReadSLEB.c
            src/mi/Lset_fpreg.c
            src/mi/_ReadULEB.c
            src/mi/Lput_dynamic_unwind_info.c
            src/mi/Lset_caching_policy.c
            src/mi/flush_cache.c
            src/mi/Gset_fpreg.c
            src/mi/Lfind_dynamic_proc_info.c
            src/mi/Lget_accessors.c
            src/mi/Lget_reg.c
            src/mi/mempool.c
            src/mi/Lset_reg.c
            src/mi/backtrace.c
            src/mi/init.c
            src/mi/strerror.c
            src/mi/Lget_fpreg.c
            src/mi/Ldyn-extract.c
            src/mi/Ldestroy_addr_space.c
            src/mi/Gdyn-extract.c
            src/mi/Gset_caching_policy.c
            src/mi/Lget_proc_name.c
            src/mi/Gget_proc_name.c
            src/mi/Lget_proc_info_by_ip.c
            src/mi/dyn-info-list.c
            src/mi/Gset_reg.c
            src/mi/Gget_fpreg.c
            src/mi/Gfind_dynamic_proc_info.c
            src/mi/Gput_dynamic_unwind_info.c
            src/mi/Gget_accessors.c
            src/mi/Gget_reg.c
            src/mi/Gget_proc_info_by_ip.c
            src/mi/dyn-register.c
            src/mi/Gdyn-remote.c
            src/mi/dyn-cancel.c
            )