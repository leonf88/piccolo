package upc;

enum MessageTypes {
  MTYPE_KERNEL_DATA = 1;
  MTYPE_KERNEL_DONE = 2;
  MTYPE_WORKER_SHUTDOWN = 4;
  MTYPE_RUN_KERNEL = 5; 
};

enum NodeIds {
  MASTER_NODE = 0;
}

message Pair {
  required bytes key = 1;
  required bytes value = 2;
}

message ConfigData {
  required bytes shard_prefix = 1;
  required int32 num_shards = 2;
  
  required int32 num_workers = 3;
  required int32 worker_id = 4;
  required int32 master_id = 9;
  required bytes kernel = 5;
  required int32 graph_size = 6;
  
  optional bool localtest = 7 [default = false];
  optional int32 network_buffer = 8 [default = 20000000];
}

message RunKernelRequest {
  required int32 kernel_id = 1;
}

message HashUpdateRequest {
  required int32 source = 1;
  required int32 hash_id = 2;
  repeated Pair update = 3;
}

message EmptyMessage {}

//shortest-path.cc
message PathNode {
  required int32 id = 1;
  repeated int32 target = 2;
  required int32 distance = 3 [default = 0];
  required bool dirty = 4 [default = false];
}
